# Diagrammes du Projet

## 1. Diagramme de Cas d'Utilisation

```
                    ┌─────────────────────────────────────┐
                    │  Système de Gestion État Civil     │
                    └─────────────────────────────────────┘
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │                           │                           │
        ▼                           ▼                           ▼
┌───────────────┐          ┌───────────────┐          ┌───────────────┐
│  Gérer les    │          │  Gérer les    │          │  Gérer les    │
│   Hommes      │          │   Femmes      │          │   Mariages    │
└───────────────┘          └───────────────┘          └───────────────┘
        │                           │                           │
        │                           │                           │
    ┌───┴────┐                  ┌───┴────┐                  ┌───┴────┐
    │        │                  │        │                  │        │
    ▼        ▼                  ▼        ▼                  ▼        ▼
┌────────┐ ┌────────┐      ┌────────┐ ┌────────┐      ┌────────┐ ┌────────┐
│ Créer  │ │Lister  │      │ Créer  │ │Lister  │      │ Créer  │ │Lister  │
└────────┘ └────────┘      └────────┘ └────────┘      └────────┘ └────────┘
    │          │                │          │                │          │
    ▼          ▼                ▼          ▼                ▼          ▼
┌────────┐ ┌────────┐      ┌────────┐ ┌────────┐      ┌────────┐ ┌────────┐
│Modifier│ │Chercher│      │Modifier│ │Chercher│      │Modifier│ │Chercher│
└────────┘ └────────┘      └────────┘ └────────┘      └────────┘ └────────┘
    │                           │                           │
    ▼                           ▼                           ▼
┌────────┐                 ┌────────┐                 ┌────────┐
│Supprimer│                │Supprimer│                │Supprimer│
└────────┘                 └────────┘                 └────────┘
```

## 2. Diagramme de Séquence - Création d'un Mariage

```
Utilisateur    App.java    MariageService    HibernateUtil    MySQL
    │             │              │                  │            │
    │──create()──>│              │                  │            │
    │             │──create(m)──>│                  │            │
    │             │              │──getSession()───>│            │
    │             │              │<─────session─────│            │
    │             │              │                  │            │
    │             │              │──beginTrans()───>│            │
    │             │              │                  │            │
    │             │              │──save(mariage)──>│            │
    │             │              │                  │──INSERT───>│
    │             │              │                  │<───OK──────│
    │             │              │                  │            │
    │             │              │──commit()───────>│            │
    │             │              │                  │            │
    │             │<─────true────│                  │            │
    │<────OK──────│              │                  │            │
```

## 3. Diagramme de Séquence - Requête avec Jointure

```
App.java    MariageService    Session    Hibernate    MySQL
    │             │              │           │          │
    │──getMariages│              │           │          │
    │   ParHomme()│              │           │          │
    │────────────>│              │           │          │
    │             │──createQuery()│          │          │
    │             │──────────────>│          │          │
    │             │              │──parse───>│          │
    │             │              │  HQL      │          │
    │             │              │           │          │
    │             │              │<─SQL─────│          │
    │             │              │           │──SELECT──>│
    │             │              │           │  (JOIN)  │
    │             │              │           │<─Results─│
    │             │              │<─ResultSet│          │
    │             │<─List<Mariage>│          │          │
    │<────────────│              │           │          │
```

## 4. Diagramme de Classes Détaillé

```
┌─────────────────────────────────────────────────────┐
│                    <<interface>>                     │
│                      IDao<T>                         │
├─────────────────────────────────────────────────────┤
│ + create(T): boolean                                 │
│ + update(T): boolean                                 │
│ + delete(T): boolean                                 │
│ + findById(int): T                                   │
│ + findAll(): List<T>                                 │
└─────────────────────────────────────────────────────┘
                        △
                        │ implements
        ┌───────────────┼───────────────┐
        │               │               │
┌───────┴────────┐ ┌────┴──────────┐ ┌─┴───────────────┐
│ HommeService   │ │ FemmeService  │ │ MariageService  │
├────────────────┤ ├───────────────┤ ├─────────────────┤
│ + create()     │ │ + create()    │ │ + create()      │
│ + update()     │ │ + update()    │ │ + update()      │
│ + delete()     │ │ + delete()    │ │ + delete()      │
│ + findById()   │ │ + findById()  │ │ + findById()    │
│ + findAll()    │ │ + findAll()   │ │ + findAll()     │
│                │ │               │ │                 │
│ + getEpouses   │ │ + getFemme    │ │ + getMariages   │
│   EntreDeuxDates│ │   PlusAgee() │ │   ParHomme()    │
│                │ │               │ │                 │
│ + getNombre    │ │ + getNombre   │ │ + getMariages   │
│   HommesMarieQ │ │   EnfantsEntre│ │   EnCours()     │
│   uatreFemmes()│ │   DeuxDates() │ │                 │
│                │ │               │ │ + getMariages   │
│                │ │ + getFemmes   │ │   Echus()       │
│                │ │   MarieeDeuxF │ │                 │
│                │ │   oisOuPlus() │ │                 │
└────────────────┘ └───────────────┘ └─────────────────┘
        │                  │                  │
        │                  │                  │
        └──────────────────┼──────────────────┘
                           │ uses
                           ▼
                ┌──────────────────┐
                │  HibernateUtil   │
                ├──────────────────┤
                │ - sessionFactory │
                ├──────────────────┤
                │ + getSession     │
                │   Factory()      │
                │ + shutdown()     │
                └──────────────────┘
```

## 5. Diagramme Entité-Relation (ERD)

```
┌─────────────────────────────────────────────────────────┐
│                       PERSONNE                          │
├─────────────────────────────────────────────────────────┤
│ PK  id: INT (AUTO_INCREMENT)                            │
│     nom: VARCHAR(255)                                   │
│     prenom: VARCHAR(255)                                │
│     dateNaissance: DATE                                 │
│     telephone: VARCHAR(20)                              │
│     adresse: VARCHAR(255)                               │
└─────────────────────────────────────────────────────────┘
                            △
                            │ (Inheritance)
                ┌───────────┴───────────┐
                │                       │
┌───────────────┴────────┐  ┌───────────┴──────────┐
│       HOMME            │  │       FEMME          │
├────────────────────────┤  ├──────────────────────┤
│ PK,FK  id: INT         │  │ PK,FK  id: INT       │
└────────────────────────┘  └──────────────────────┘
            │                           │
            │                           │
            │       ┌──────────┐        │
            └──────>│ MARIAGE  │<───────┘
                    ├──────────┤
                    │ PK  id   │
                    │ FK  homme_id
                    │ FK  femme_id
                    │     dateDebut
                    │     dateFin
                    │     nbrEnfants
                    └──────────┘

Relations:
- HOMME (1) ──── (N) MARIAGE
- FEMME (1) ──── (N) MARIAGE
- PERSONNE (1) ──── (1) HOMME/FEMME (Héritage)
```

## 6. Diagramme de Déploiement

```
┌─────────────────────────────────────────────────────┐
│              Poste de Développement                  │
│                                                      │
│  ┌────────────────────────────────────────────┐    │
│  │         JVM (Java 8+)                       │    │
│  │                                             │    │
│  │  ┌──────────────────────────────────┐      │    │
│  │  │     Application Java             │      │    │
│  │  │  ┌────────────────────────┐      │      │    │
│  │  │  │      App.java          │      │      │    │
│  │  │  └────────────────────────┘      │      │    │
│  │  │  ┌────────────────────────┐      │      │    │
│  │  │  │   Services Layer       │      │      │    │
│  │  │  └────────────────────────┘      │      │    │
│  │  │  ┌────────────────────────┐      │      │    │
│  │  │  │   Hibernate ORM        │      │      │    │
│  │  │  └────────────────────────┘      │      │    │
│  │  │  ┌────────────────────────┐      │      │    │
│  │  │  │  MySQL Connector       │      │      │    │
│  │  │  └────────────────────────┘      │      │    │
│  │  └──────────────────────────────────┘      │    │
│  └────────────────────────────────────────────┘    │
│                      │                              │
│                      │ JDBC                         │
│                      ▼                              │
│  ┌────────────────────────────────────────────┐    │
│  │         MySQL Server 8.0                    │    │
│  │                                             │    │
│  │  ┌──────────────────────────────────┐      │    │
│  │  │   Database: etat_civil           │      │    │
│  │  │                                  │      │    │
│  │  │   Tables:                        │      │    │
│  │  │   - personne                     │      │    │
│  │  │   - homme                        │      │    │
│  │  │   - femme                        │      │    │
│  │  │   - mariage                      │      │    │
│  │  └──────────────────────────────────┘      │    │
│  └────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────┘
```

## 7. Diagramme d'États - Mariage

```
                    ┌──────────────┐
                    │   [Début]    │
                    └──────┬───────┘
                           │
                           │ create()
                           ▼
                    ┌──────────────┐
                    │  EN COURS    │
                    │              │
                    │ dateFin=NULL │
                    └──────┬───────┘
                           │
                           │ setDateFin()
                           ▼
                    ┌──────────────┐
                    │    ÉCHU      │
                    │              │
                    │ dateFin!=NULL│
                    └──────┬───────┘
                           │
                           │ delete()
                           ▼
                    ┌──────────────┐
                    │  [Supprimé]  │
                    └──────────────┘
```

## 8. Diagramme de Flux de Données

```
┌──────────┐
│Utilisateur│
└─────┬────┘
      │
      │ 1. Lancer App.java
      ▼
┌─────────────────────────────────────────┐
│          Couche Présentation            │
│              (App.java)                 │
└─────────────────┬───────────────────────┘
                  │
                  │ 2. Appel des services
                  ▼
┌─────────────────────────────────────────┐
│          Couche Service                 │
│  HommeService | FemmeService | Mariage  │
└─────────────────┬───────────────────────┘
                  │
                  │ 3. Requêtes HQL
                  ▼
┌─────────────────────────────────────────┐
│          Hibernate ORM                  │
│        (HibernateUtil)                  │
└─────────────────┬───────────────────────┘
                  │
                  │ 4. SQL généré
                  ▼
┌─────────────────────────────────────────┐
│          MySQL Database                 │
│         (etat_civil)                    │
└─────────────────┬───────────────────────┘
                  │
                  │ 5. Résultats
                  ▼
┌─────────────────────────────────────────┐
│          Affichage Console              │
└─────────────────────────────────────────┘
```

## 9. Diagramme de Packages

```
┌───────────────────────────────────────────────────────┐
│                   ma.projet                           │
├───────────────────────────────────────────────────────┤
│                                                       │
│  ┌─────────────────────────────────────────────┐    │
│  │           ma.projet.beans                    │    │
│  │  ┌─────────────────────────────────────┐    │    │
│  │  │ Personne, Homme, Femme, Mariage     │    │    │
│  │  └─────────────────────────────────────┘    │    │
│  └─────────────────────────────────────────────┘    │
│                      △                               │
│                      │ uses                          │
│  ┌─────────────────────────────────────────────┐    │
│  │           ma.projet.service                  │    │
│  │  ┌─────────────────────────────────────┐    │    │
│  │  │ HommeService, FemmeService,         │    │    │
│  │  │ MariageService                      │    │    │
│  │  └─────────────────────────────────────┘    │    │
│  └─────────────────────────────────────────────┘    │
│                      △                               │
│                      │ implements                    │
│  ┌─────────────────────────────────────────────┐    │
│  │           ma.projet.dao                      │    │
│  │  ┌─────────────────────────────────────┐    │    │
│  │  │ IDao<T>                             │    │    │
│  │  └─────────────────────────────────────┘    │    │
│  └─────────────────────────────────────────────┘    │
│                                                       │
│  ┌─────────────────────────────────────────────┐    │
│  │           ma.projet.util                     │    │
│  │  ┌─────────────────────────────────────┐    │    │
│  │  │ HibernateUtil                       │    │    │
│  │  └─────────────────────────────────────┘    │    │
│  └─────────────────────────────────────────────┘    │
│                                                       │
│  ┌─────────────────────────────────────────────┐    │
│  │           App.java (main)                    │    │
│  └─────────────────────────────────────────────┘    │
└───────────────────────────────────────────────────────┘
```

## 10. Diagramme de Composants

```
┌─────────────────────────────────────────────────────────┐
│                  Application Layer                       │
│  ┌───────────────────────────────────────────────┐     │
│  │              App.java                          │     │
│  │         (Point d'entrée)                       │     │
│  └───────────────────────────────────────────────┘     │
└──────────────────────┬──────────────────────────────────┘
                       │
┌──────────────────────┼──────────────────────────────────┐
│                      ▼         Service Layer            │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
│  │ HommeService │ │ FemmeService │ │MariageService│   │
│  └──────────────┘ └──────────────┘ └──────────────┘   │
└──────────────────────┬──────────────────────────────────┘
                       │
┌──────────────────────┼──────────────────────────────────┐
│                      ▼         DAO Layer                │
│  ┌────────────────────────────────────────────────┐    │
│  │              IDao<T>                            │    │
│  └────────────────────────────────────────────────┘    │
└──────────────────────┬──────────────────────────────────┘
                       │
┌──────────────────────┼──────────────────────────────────┐
│                      ▼      Persistence Layer           │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐  │
│  │ Personne │ │  Homme   │ │  Femme   │ │ Mariage  │  │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘  │
└──────────────────────┬──────────────────────────────────┘
                       │
┌──────────────────────┼──────────────────────────────────┐
│                      ▼      ORM Layer                   │
│  ┌────────────────────────────────────────────────┐    │
│  │         Hibernate + HibernateUtil              │    │
│  └────────────────────────────────────────────────┘    │
└──────────────────────┬──────────────────────────────────┘
                       │
┌──────────────────────┼──────────────────────────────────┐
│                      ▼      Database Layer              │
│  ┌────────────────────────────────────────────────┐    │
│  │           MySQL Database                       │    │
│  │           (etat_civil)                         │    │
│  └────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

---

## Légende

- **PK** : Primary Key (Clé primaire)
- **FK** : Foreign Key (Clé étrangère)
- **△** : Héritage
- **◇** : Composition
- **→** : Association / Dépendance
- **├──** : Relation
